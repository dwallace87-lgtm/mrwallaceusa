
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>US History - Brooklyn Edition</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --ink: #0b0b12;
      --card: 28,28,40;
      --accent: 196, 143, 255;
      --accent2: 120, 104, 255;
      --muted: 180, 180, 200;
    }
    html, body { height: 100%; }
    body{
      font-family: 'Plus Jakarta Sans', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: radial-gradient(1200px 600px at 10% -10%, rgba(var(--accent), .20), transparent 60%),
                  radial-gradient(800px 400px at 110% 10%, rgba(var(--accent2), .20), transparent 60%),
                  #0e0e14;
      color: #f6f6fb;
      overflow-x: hidden;
    }
    .glass {
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 10px 50px rgba(0,0,0,.35), inset 0 1px rgba(255,255,255,.08);
      backdrop-filter: blur(12px) saturate(120%);
      -webkit-backdrop-filter: blur(12px) saturate(120%);
    }
    #progress {
      position: fixed; inset: 0 0 auto 0; height: 4px; z-index: 80;
      background: linear-gradient(90deg, rgba(var(--accent),1), rgba(var(--accent2),1));
      transform-origin: 0 50%; transform: scaleX(0);
      box-shadow: 0 0 18px rgba(180,140,255,.9);
    }
    .gridlines::before {
      content:""; position:absolute; inset:0;
      background:
        repeating-linear-gradient(90deg, rgba(255,255,255,.06), rgba(255,255,255,.06) 1px, transparent 1px, transparent 40px),
        repeating-linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.04) 1px, transparent 1px, transparent 40px);
      mask-image: radial-gradient(1000px 400px at 50% 10%, black 30%, transparent 75%);
      pointer-events:none;
    }
    .lift { transition: transform .35s cubic-bezier(.2,.8,.2,1), box-shadow .35s; }
    .lift:hover { transform: translateY(-6px) scale(1.01); box-shadow: 0 20px 60px rgba(0,0,0,.5); }
    .snap-x { scroll-snap-type: x mandatory; }
    .snap { scroll-snap-align: start; }
    .neon { text-shadow: 0 0 12px rgba(var(--accent), .8), 0 0 32px rgba(var(--accent2), .6); }
    .hero-glow{
      position: relative;
      display: block;
      width: 100%;
      isolation: isolate;
    }
    .hero-glow::after{
      content: "";
      position: absolute;
      inset: -14%;
      background: radial-gradient(circle at 35% 30%, rgba(var(--accent), .35), transparent 60%),
                  radial-gradient(circle at 70% 65%, rgba(var(--accent2), .3), transparent 70%);
      mix-blend-mode: screen;
      filter: blur(26px);
      opacity: .55;
      pointer-events: none;
      animation: auraDrift 14s ease-in-out infinite;
      z-index: -1;
    }
    .hero-image{
      display: block;
      width: 100%;
      border-radius: 1.35rem;
      filter: drop-shadow(0 0 18px rgba(var(--accent), .55)) drop-shadow(0 0 34px rgba(var(--accent2), .35));
      animation: pulseGlow 6s ease-in-out infinite;
      transform-origin: center;
    }
    @keyframes pulseGlow{
      0%, 100%{
        transform: translateY(0) scale(1);
        filter: drop-shadow(0 0 16px rgba(var(--accent), .45)) drop-shadow(0 0 32px rgba(var(--accent2), .3));
      }
      50%{
        transform: translateY(-6px) scale(1.03);
        filter: drop-shadow(0 0 28px rgba(var(--accent), .7)) drop-shadow(0 0 46px rgba(var(--accent2), .5));
      }
    }
    @keyframes auraDrift{
      0%{ transform: scale(1) rotate(0deg); opacity: .5; }
      50%{ transform: scale(1.12) rotate(180deg); opacity: .85; }
      100%{ transform: scale(1) rotate(360deg); opacity: .5; }
    }
    @media (prefers-reduced-motion: reduce) {
      .lift, .motion, .hero-image, .hero-glow::after {
        transition: none !important;
        animation: none !important;
      }
    }

    /* Brand icon with hover glint */
    .brand-icon{
      background-image:url('https://pbs.twimg.com/profile_images/780439272352546816/maiPMlAT_400x400.jpg');
      background-size: cover;
      background-position: center;
      position: relative;
      isolation: isolate;
    }
    .brand-icon::after{
      content: "";
      position: absolute; inset: 0;
      border-radius: inherit;
      background: linear-gradient(120deg,
        transparent 0%,
        rgba(255,255,255,0.00) 35%,
        rgba(255,255,255,0.55) 50%,
        rgba(255,255,255,0.00) 65%,
        transparent 100%);
      transform: translateX(-120%);
      pointer-events: none;
    }
    .brand-icon:hover::after{
      transition: transform .65s cubic-bezier(.2,.8,.2,1);
      transform: translateX(120%);
    }

    /* Cooler typographic system */
    .nav-link{
      position:relative; text-transform:uppercase; letter-spacing:.12em;
      font-weight:700; padding-bottom:2px;
    }
    .nav-link::after{
      content:""; position:absolute; left:0; bottom:-2px; height:2px; width:0%;
      background: linear-gradient(90deg, rgba(196,143,255,1), rgba(120,104,255,1));
      transition: width .35s cubic-bezier(.2,.8,.2,1);
      box-shadow: 0 0 12px rgba(170,140,255,.8);
    }
    .nav-link:hover::after{ width:100%; }
    .nav-link:hover{ text-shadow: 0 0 8px rgba(196,143,255,.6); }

    .pill{
      display:inline-block; font-size:.72rem; letter-spacing:.06em;
      text-transform:uppercase; padding:.25rem .5rem;
      border-radius:.65rem;
      background: linear-gradient(90deg, rgba(196,143,255,.25), rgba(120,104,255,.25));
      border:1px solid rgba(255,255,255,.14);
    }
    .year{
      font-variant-numeric: tabular-nums; letter-spacing:.06em;
      font-size:1.05rem;
    }
    .card-title{
      font-weight:800; letter-spacing:.01em;
      background: linear-gradient(90deg, #fff, #cdb8ff);
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .callout{
      border-left:3px solid rgba(196,143,255,.6);
      padding-left:.75rem;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border-radius:.75rem;
    }
    mark, .hl{
      background: linear-gradient(90deg, rgba(255,225,0,.35), rgba(255,140,0,.25));
      color: #fff; padding:0 .2rem; border-radius:.25rem;
    }
  
/* Flip card styles */
.flip{ perspective: 1200px; }
.flip-inner{
  position: relative; transform-style: preserve-3d;
  transition: transform .6s cubic-bezier(.2,.8,.2,1);
  min-height: 220px;
}
.flip.flipped .flip-inner{ transform: rotateY(180deg); }
.flip-face{
  position:absolute; inset:0; backface-visibility:hidden; -webkit-backface-visibility:hidden;
  display:flex; flex-direction:column;
}
.flip-back{ transform: rotateY(180deg); }
.flip button.flipBtn{
  margin-top: .5rem; align-self:flex-start;
}

  </style>
</head>
<body class="selection:bg-fuchsia-300/30 selection:text-white">
  <div id="progress"></div>
  <canvas id="dots" class="fixed inset-0 -z-10 opacity-40"></canvas>

  <header class="sticky top-0 z-50">
    <nav class="glass flex items-center justify-between px-4 md:px-8 py-3">
      <div class="flex items-center gap-3">
        <div class="brand-icon h-8 w-8 rounded-xl shadow-lg overflow-hidden"></div>
        <span class="font-extrabold tracking-tight">Mr. Wallace's U.S. History Class</span>
      </div>
      <button id="mobileBtn" class="md:hidden px-3 py-2 rounded-lg bg-white/10 hover:bg-white/15">Menu</button>
      <ul id="links" class="hidden md:flex items-center gap-6 text-sm text-white/85">
        <li><a href="#about" class="nav-link">About</a></li>
        <li><a href="#calendar" class="nav-link">Calendar</a></li>
        <li><a href="#assign" class="nav-link">Assignments</a></li>
        <li><a href="#timeline" class="nav-link">Timeline</a></li>
        <li><a href="#resources" class="nav-link">Resources</a></li>
        <li><a href="#regents" class="nav-link">NY Regents Prep</a></li>
      </ul>
    </nav>
    <ul id="mobileMenu" class="md:hidden hidden glass px-4 py-3 space-y-2">
      <li><a href="#about" class="block py-1.5">About</a></li>
      <li><a href="#calendar" class="block py-1.5">Calendar</a></li>
      <li><a href="#assign" class="block py-1.5">Assignments</a></li>
      <li><a href="#timeline" class="block py-1.5">Timeline</a></li>
      <li><a href="#resources" class="block py-1.5">Resources</a></li>
      <li><a href="#regents" class="block py-1.5">NY Regents Prep</a></li>
    </ul>
  </header>

  <section class="relative gridlines overflow-hidden">
    <div class="absolute -top-24 -left-20 h-64 w-64 rounded-full blur-3xl bg-fuchsia-500/40"></div>
    <div class="absolute -bottom-24 -right-24 h-72 w-72 rounded-full blur-3xl bg-indigo-500/40"></div>

    <div class="max-w-7xl mx-auto px-6 md:px-10 py-16 md:py-24">
      <div class="flex flex-col lg:flex-row items-center lg:items-start gap-12">
        <div class="flex-1 w-full">
          <p class="text-sm tracking-widest text-white/70 uppercase">Northside Charter - US History</p>
          <h1 class="text-4xl md:text-6xl font-extrabold leading-tight neon">Your Gateway to the Past</h1>
          <p class="mt-3 max-w-2xl text-white/80">Streamlined hub for class life in NYC - quick links, live calendar, and interactive history that feels like now.</p>

          <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
            <a href="#calendar" class="glass lift p-4 rounded-2xl">
              <p class="text-white/70 text-xs">Jump to</p>
              <p class="font-semibold">Calendar</p>
            </a>
            <a href="#assign" class="glass lift p-4 rounded-2xl">
              <p class="text-white/70 text-xs">See</p>
              <p class="font-semibold">Assignments</p>
            </a>
            <a href="#timeline" class="glass lift p-4 rounded-2xl">
              <p class="text-white/70 text-xs">Explore</p>
              <p class="font-semibold">Interactive Timeline</p>
            </a>
            <a href="#resources" class="glass lift p-4 rounded-2xl">
              <p class="text-white/70 text-xs">Find</p>
              <p class="font-semibold">Study Boosters</p>
            </a>
          </div>
        </div>
        <div class="flex-1 w-full max-w-md">
          <div class="hero-glow mx-auto">
            <img src="https://lh3.googleusercontent.com/d/1Uc6vXBPP8zkAVAzwrgM5rbtVZUEZVlJJ" alt="Students exploring history" class="hero-image" loading="lazy" />
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="about" class="max-w-7xl mx-auto px-6 md:px-10 py-16">
    <div class="grid md:grid-cols-3 gap-8 items-center">
      <div class="md:col-span-2">
        <h2 class="text-2xl md:text-3xl font-extrabold">About the Course</h2>
        <p class="mt-3 text-white/80">We connect primary sources to the city outside your door. Expect short reads, mini debates, creation days, and a weekly project you can be proud of.</p>
        <ul class="mt-6 grid sm:grid-cols-2 gap-3 text-sm">
          <li class="glass p-3 rounded-xl">Grade-friendly deadlines</li>
          <li class="glass p-3 rounded-xl">Every Friday - showcase your build</li>
          <li class="glass p-3 rounded-xl">Office hours after school</li>
          <li class="glass p-3 rounded-xl">Regents skills from day one</li>
        </ul>
      </div>
      <div class="glass p-6 rounded-2xl lift">
        <p class="text-sm text-white/70">Contact</p>
        <p class="text-lg font-semibold">Mr. Wallace</p>
        <p class="text-white/75">Room 3xx - Brooklyn</p>
        <a href="mailto:example@school.org" class="mt-3 inline-block px-3 py-1.5 rounded-lg bg-gradient-to-r from-fuchsia-500 to-indigo-500">Email</a>
      </div>
    </div>
  </section>

  <section id="calendar" class="max-w-7xl mx-auto px-6 md:px-10 py-16">
    <div class="flex items-end justify-between gap-4 flex-wrap">
      <h2 class="text-2xl md:text-3xl font-extrabold">Class Calendar</h2>
      <div class="glass rounded-xl p-1 flex gap-1">
        <button data-view="embed" class="tab px-3 py-1.5 rounded-lg bg-white/10">Embed</button>
        <button data-view="cards" class="tab px-3 py-1.5 rounded-lg">Cards</button>
        <button data-view="subscribe" class="tab px-3 py-1.5 rounded-lg">Subscribe</button>
      </div>
    </div>

    <div id="cal-embed" class="mt-6 glass rounded-2xl overflow-hidden">
      <iframe title="Google Calendar" style="width:100%; height:540px; border:0"
        src="https://calendar.google.com/calendar/embed?src=address%40example.com&ctz=America%2FNew_York&mode=MONTH&showTabs=1&showTz=0&showPrint=0&bgcolor=%23ffffff00&color=%23ab47bc">
      </iframe>
    </div>

    <div class="flex items-center gap-2 mt-3">
      <input id="dayPicker" type="date" class="glass rounded-lg px-3 py-1.5 text-sm bg-white/5" />
      <div class="glass rounded-xl p-1 flex gap-1">
        <button id="btnMonth" class="px-3 py-1.5 rounded-lg bg-white/10">Month</button>
        <button id="btnDay" class="px-3 py-1.5 rounded-lg">Day</button>
      </div>
    </div>

    <div id="cal-cards" class="mt-6 hidden grid sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>

    <div id="cal-sub" class="mt-6 hidden glass rounded-2xl p-6">
      <p class="text-white/80">Add to your calendar app:</p>
      <div class="mt-3 flex flex-wrap gap-3">
        <a class="px-3 py-2 rounded-lg bg-gradient-to-r from-fuchsia-500 to-indigo-500" href="#" onclick="alert('Replace with your Google Calendar public link')">Google Calendar</a>
        <a class="px-3 py-2 rounded-lg bg-white/10" href="data:text/calendar;charset=utf-8,BEGIN:VCALENDAR%0AVERSION:2.0%0ABEGIN:VEVENT%0ASUMMARY:Example%20Event%0ADTSTART:20251115T150000Z%0ADTEND:20251115T160000Z%0AEND:VEVENT%0AEND:VCALENDAR">Download ICS</a>
      </div>
    </div>
  </section>

  <section id="assign" class="max-w-7xl mx-auto px-6 md:px-10 py-16">
    <div class="flex items-end justify-between gap-4 flex-wrap">
      <h2 class="text-2xl md:text-3xl font-extrabold">Assignments</h2>
      <div class="flex items-center gap-2">
        <label class="text-sm text-white/70" for="tag">Filter</label>
        <select id="tag" class="glass rounded-lg px-3 py-1.5 text-sm">
          <option value="all">All</option>
          <option value="essay">Essay</option>
          <option value="presentation">Presentation</option>
          <option value="worksheet">Worksheet</option>
        </select>
      </div>
    </div>
    <div id="assignList" class="mt-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>
  </section>

  <!-- Unit-based Interactive Timeline (no priority toggle) -->
  <section id="timeline" class="max-w-[100vw] overflow-x-hidden px-0 py-16">
    <div class="max-w-7xl mx-auto px-6 md:px-10">
      <div class="flex items-end justify-between gap-4 flex-wrap">
        <div>
          <h2 class="text-2xl md:text-3xl font-extrabold">Interactive Timeline</h2>
          <p class="text-white/75 mt-2">Pick a unit. Slide to browse. Tap a card to see cause and effect.</p>
        </div>
        <div class="flex items-center gap-3">
          <label for="unitPick" class="text-sm text-white/70">Unit</label>
          <select id="unitPick" class="glass rounded-lg px-3 py-1.5 text-sm">
            <option value="US01">Unit 1 - Colonies and Conflict</option>
            <option value="US02">Unit 2 - American Revolution</option>
            <option value="US03" selected>Unit 3 - Building a Nation</option>
          </select>
        </div>
      </div>
    </div>
    <div class="mt-6 pl-6 pr-3 flex gap-4 overflow-x-auto snap-x" id="tlRow"></div>
  </section>

  <section id="resources" class="max-w-7xl mx-auto px-6 md:px-10 py-16">
    <h2 class="text-2xl md:text-3xl font-extrabold">Resources</h2>
    <div class="mt-6 grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
      <a target="_blank" class="glass rounded-2xl p-5 lift" href="https://www.archives.gov/">
        <p class="card-title">National Archives</p>
        <p class="text-sm text-white/75">Primary docs and images.</p>
      </a>
      <a target="_blank" class="glass rounded-2xl p-5 lift" href="https://www.loc.gov/">
        <p class="card-title">Library of Congress</p>
        <p class="text-sm text-white/75">Maps, photos, newspapers.</p>
      </a>
      <a target="_blank" class="glass rounded-2xl p-5 lift" href="https://www.gilderlehrman.org/">
        <p class="card-title">Gilder Lehrman</p>
        <p class="text-sm text-white/75">Lesson supports and timelines.</p>
      </a>
      <a target="_blank" class="glass rounded-2xl p-5 lift" href="https://worldhistorycommons.org/">
        <p class="card-title">World History Commons</p>
        <p class="text-sm text-white/75">Curated sources and guides.</p>
      </a>
    </div>
  </section>

  <!-- NY REGENTS Prep -->
  <section id="regents" class="max-w-7xl mx-auto px-6 md:px-10 py-16">
    <div class="glass rounded-2xl p-6 lift">
      <h2 class="text-2xl md:text-3xl font-extrabold">NY Regents Prep</h2>
      <p class="mt-2 text-white/80">Quick practice built into our vibe. Short bursts that target skills: thesis, sourcing, reliability, context, and cause then effect.</p>
      <div class="mt-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
        <a class="glass rounded-2xl p-5 lift" href="#">
          <p class="card-title">Set 1 - Sequence</p>
          <p class="text-sm text-white/80 mt-1">Put events in order and connect why each one matters.</p>
        </a>
        <a class="glass rounded-2xl p-5 lift" href="#">
          <p class="card-title">Set 2 - Reliability</p>
          <p class="text-sm text-white/80 mt-1">Audience, purpose, bias. Make the call and back it up.</p>
        </a>
        <a class="glass rounded-2xl p-5 lift" href="#">
          <p class="card-title">Set 3 - Enduring Issues</p>
          <p class="text-sm text-white/80 mt-1">Find the issue. Use evidence. Write clean and strong.</p>
        </a>
      </div>
    </div>
  </section>

  <footer class="py-10 text-center text-white/60 text-sm">Built for Brooklyn - 2025</footer>

  <script>
    // Mobile menu
    const mobileBtn = document.getElementById('mobileBtn');
    const mm = document.getElementById('mobileMenu');
    mobileBtn?.addEventListener('click', ()=> mm.classList.toggle('hidden'));

    // Scroll progress
    const bar = document.getElementById('progress');
    window.addEventListener('scroll', () => {
      const h = document.documentElement;
      const p = (h.scrollTop) / (h.scrollHeight - h.clientHeight);
      bar.style.transform = `scaleX(${p})`;
    });

    // Particle dots
    const c = document.getElementById('dots');
    const ctx = c.getContext('2d');
    let W, H; let dots = [];
    function resize(){
      W = c.width = window.innerWidth; H = c.height = window.innerHeight;
      dots = Array.from({length: Math.min(80, Math.floor(W/20))}, (_,i)=> ({
        x: Math.random()*W, y: Math.random()*H,
        vx: (Math.random()-.5)*.7, vy: (Math.random()-.5)*.7,
        r: 1.2 + Math.random()*1.8
      }));
    }
    resize(); window.addEventListener('resize', resize);

    function animate(){
      ctx.clearRect(0,0,W,H);
      ctx.fillStyle = 'rgba(255,255,255,.7)';
      dots.forEach(d=>{
        d.x += d.vx; d.y += d.vy;
        if(d.x<0||d.x>W) d.vx*=-1;
        if(d.y<0||d.y>H) d.vy*=-1;
        ctx.beginPath(); ctx.arc(d.x,d.y,d.r,0,Math.PI*2); ctx.fill();
      });
      ctx.strokeStyle = 'rgba(190,160,255,.15)';
      for(let i=0;i<dots.length;i++){
        for(let j=i+1;j<dots.length;j++){
          const dx = dots[i].x - dots[j].x, dy = dots[i].y - dots[j].y;
          const dist = Math.hypot(dx,dy);
          if(dist<120){
            ctx.globalAlpha = 1 - (dist/120);
            ctx.beginPath(); ctx.moveTo(dots[i].x,dots[i].y); ctx.lineTo(dots[j].x,dots[j].y); ctx.stroke();
            ctx.globalAlpha = 1;
          }
        }
      }
      requestAnimationFrame(animate);
    }
    animate();

    // Calendar tabs
    const tabs = document.querySelectorAll('.tab');
    const embed = document.getElementById('cal-embed');
    const cards = document.getElementById('cal-cards');
    const sub = document.getElementById('cal-sub');
    tabs.forEach(b=> b.addEventListener('click', () => {
      tabs.forEach(t=> t.classList.remove('bg-white/10'));
      b.classList.add('bg-white/10');
      const v = b.dataset.view;
      embed.classList.toggle('hidden', v!=='embed');
      cards.classList.toggle('hidden', v!=='cards');
      sub.classList.toggle('hidden', v!=='subscribe');
    }));

    // Month / Day controls
    const calFrame = document.querySelector('#cal-embed iframe');
    const dayPicker = document.getElementById('dayPicker');
    const btnMonth = document.getElementById('btnMonth');
    const btnDay = document.getElementById('btnDay');
    function fmt(d){
      const y = d.getFullYear(); const m = String(d.getMonth()+1).padStart(2,'0'); const dd = String(d.getDate()).padStart(2,'0');
      return `${y}${m}${dd}`;
    }
    (function initPicker(){
      const t = new Date();
      dayPicker.value = `${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,'0')}-${String(t.getDate()).padStart(2,'0')}`;
    })();
    function setMonthView(){
      try{
        const url = new URL(calFrame.src);
        url.searchParams.set('mode','MONTH');
        url.searchParams.delete('dates');
        calFrame.src = url.toString();
      }catch(e){}
      btnMonth.classList.add('bg-white/10');
      btnDay.classList.remove('bg-white/10');
    }
    function setDayView(dateStrISO){
      const d = dateStrISO ? new Date(dateStrISO) : new Date();
      const ymd = fmt(d);
      try{
        const url = new URL(calFrame.src);
        url.searchParams.set('mode','WEEK');
        url.searchParams.set('dates', `${ymd}/${ymd}`);
        calFrame.src = url.toString();
      }catch(e){}
      btnDay.classList.add('bg-white/10');
      btnMonth.classList.remove('bg-white/10');
    }
    btnMonth?.addEventListener('click', setMonthView);
    btnDay?.addEventListener('click', ()=> setDayView(dayPicker.value));
    dayPicker?.addEventListener('change', ()=> setDayView(dayPicker.value));
    setMonthView();

    // Calendar cards demo data
    const demoEvents = [
      {title:'Quiz - Reconstruction', when:'Fri, Nov 1 - in class', tag:'assessment'},
      {title:'DBQ Workshop', when:'Tue, Nov 4 - after school', tag:'workshop'},
      {title:'Field Trip - N-Y Historical', when:'Fri, Nov 8 - permission due', tag:'trip'},
      {title:'Project - Civic Voices', when:'Mon, Nov 18 - submit link', tag:'project'}
    ];
    function renderEvents(){
      cards.innerHTML = demoEvents.map(ev => `
        <article class="glass rounded-2xl p-4 lift">
          <p class="text-xs text-white/70">${ev.when}</p>
          <p class="card-title mt-1">${ev.title}</p>
          <div class="mt-3 flex gap-2">
            <span class="pill text-xs">${ev.tag}</span>
            <button class="px-2 py-0.5 rounded bg-gradient-to-r from-fuchsia-500 to-indigo-500 text-xs">Add reminder</button>
          </div>
        </article>
      `).join('');
    }
    renderEvents();

    // Assignments filter
    const assignments = [
      {title:'Revolution Essay', due:'Nov 10', tag:'essay', blurb:'2 pages about causes and turning points.'},
      {title:'Civil War Mini Deck', due:'Nov 20', tag:'presentation', blurb:'5 slides - one map, one source.'},
      {title:'Constitution Sheet', due:'Nov 30', tag:'worksheet', blurb:'Key clauses and checks.'},
      {title:'Industrialization Photo Study', due:'Dec 6', tag:'presentation', blurb:'Photo analysis and claim.'},
      {title:'Rights and Responsibilities', due:'Dec 13', tag:'essay', blurb:'Short response with evidence.'}
    ];
    const assignList = document.getElementById('assignList');
    const tagSel = document.getElementById('tag');
    function drawAssignments(){
      const f = tagSel.value;
      assignList.innerHTML = assignments
        .filter(a => f==='all' || a.tag===f)
        .map(a => `
          <article class="glass rounded-2xl p-5 lift">
            <div class="flex items-center justify-between">
              <p class="card-title">${a.title}</p>
              <span class="text-xs pill">Due ${a.due}</span>
            </div>
            <p class="mt-2 text-white/80 text-sm">${a.blurb}</p>
            <div class="mt-3 flex items-center gap-2">
              <span class="pill text-xs">${a.tag}</span>
              <button class="px-2 py-0.5 rounded bg-gradient-to-r from-fuchsia-500 to-indigo-500 text-xs">Open</button>
            </div>
          </article>
        `).join('');
    }
    drawAssignments();
    tagSel.addEventListener('change', drawAssignments);

    
// ===== Unit Timelines (Units 1–3) flippable cards =====
const TL_DATA = {
  US01: [
    {year: '1607', title: 'Jamestown', blurb: 'First permanent English spot pulls up and chases profit.',
     cause: 'Joint-stock and imperial goals', effect: 'Tobacco economy and indentured labor grow'},
    {year: '1620', title: 'Mayflower Compact', blurb: 'Pilgrims write a quick squad agreement to keep order.',
     cause: 'Need for order in a new colony', effect: 'Self-government idea takes root'},
    {year: '1754', title: 'French and Indian War', blurb: 'Britain vs France beef goes full send in North America.',
     cause: 'Imperial rivalry in North America', effect: 'Debt and new taxes set stage for conflict'}
  ],
  US02: [
    {year: '1765', title: 'Stamp Act Crisis', blurb: 'Parliament taxes paper and the colonies say nah.',
     cause: 'Parliament taxes without colonial say', effect: 'Boycotts and unity grow'},
    {year: '1776', title: 'Declaration of Independence', blurb: 'Colonies make it official: we out.',
     cause: 'Escalating conflict and rights talk', effect: 'Formal break and new nation project'},
    {year: '1783', title: 'Treaty of Paris', blurb: 'Peace signed, US on the map for real.',
     cause: 'War weariness and battlefield losses', effect: 'US recognition and territory to Mississippi'}
  ],
  US03: [
    {year: '1787', title: 'Northwest Ordinance', blurb: 'New states get a legit roadmap, slavery banned in the zone.',
     cause: 'Need to organize the Old Northwest', effect: 'Rules for statehood and banned slavery in the territory'},
    {year: '1800', title: 'North America Map Shift', blurb: 'Big powers crowd the map, US eyeing the West.',
     cause: 'Competing empires in 1800', effect: 'US poised for western push'},
    {year: '1803', title: 'Louisiana Purchase', blurb: 'Jefferson cops a massive land pack, double the country.',
     cause: 'Access to New Orleans and Mississippi River', effect: 'Doubles US land and pressures Native homelands',
     img: 'https://historyclubmagazinedccc.wordpress.com/wp-content/uploads/2015/02/louisiana.jpg'},
    {year: '1803', title: "Jefferson's Motives", blurb: 'He wants farmer power and control of the river bag.',
     cause: 'Farming vision and river trade security', effect: 'Policy backs expansion and survey missions'},
    {year: '1804–06', title: 'Lewis and Clark', blurb: 'Explorers run recon, meet nations, map the way.',
     cause: 'Need to map and claim the new land', effect: 'Contact with Native nations and pathfinding'},
    {year: '1830', title: 'Indian Removal Act', blurb: 'Government forces Native nations off land for settler growth.',
     cause: 'Land hunger and state pressure', effect: 'Forced migrations and massive loss for Native peoples'},
    {year: '1812–15', title: 'War of 1812', blurb: 'Messy war, but pride goes up and industry wakes up.',
     cause: 'Trade fights and frontier conflict', effect: 'Surge in nationalism and industry talk'},
    {year: '1823', title: 'Monroe Doctrine', blurb: 'US tells Europe hands off the neighborhood.',
     cause: 'European powers eye the Americas', effect: 'US warns Europe and claims a regional role'},
    {year: '1825', title: 'Erie Canal', blurb: 'Water highway turns NYC into the plug.',
     cause: 'Link Great Lakes to Atlantic markets', effect: 'Cheaper shipping and new city growth'},
    {year: '1848', title: 'Early Women’s Rights', blurb: 'Reformers connect abolition to women’s rights and push.',
     cause: 'Abolition activism highlights inequality', effect: 'Seneca Falls talk of rights and reform'}
  ]
};

const tlRow = document.getElementById('tlRow');
const unitPick = document.getElementById('unitPick');

function colorByIndex(i){
  const palettes = [
    'from-fuchsia-500/40 to-indigo-500/40',
    'from-indigo-500/40 to-violet-500/40',
    'from-violet-500/40 to-fuchsia-500/40',
    'from-sky-400/30 to-emerald-400/30',
    'from-white/10 to-white/5'
  ];
  return palettes[i % palettes.length];
}

function cardVisual(d, i){
  if(d.img){
    return `
      <div class="relative h-40 rounded-xl overflow-hidden">
        <img src="${d.img}" alt="${d.title} illustration" class="absolute inset-0 h-full w-full object-cover" loading="lazy" />
        <div class="absolute inset-0 bg-gradient-to-t from-black/50 via-black/20 to-transparent"></div>
      </div>
    `;
  }
  return `<div class="relative h-40 rounded-xl bg-gradient-to-br ${colorByIndex(i)}"></div>`;
}

function renderTimeline(){
  const unit = unitPick.value;
  const data = TL_DATA[unit] || [];
  tlRow.innerHTML = data.map((d,i) => `
    <article class="snap glass rounded-2xl min-w-[300px] max-w-[340px] p-0 lift group flip" tabindex="0" aria-label="${d.title} card. Press enter to flip.">
      <div class="flip-inner rounded-2xl overflow-hidden">
        <!-- FRONT -->
        <div class="flip-face flip-front p-4">
          ${cardVisual(d, i)}
          <div class="mt-3"><p class="year font-bold">${d.year}</p></div>
          <p class="mt-1 card-title">${d.title}</p>
          <p class="mt-2 text-sm text-white/85">${d.blurb}</p>
          <button class="flipBtn px-3 py-1.5 rounded-lg bg-white/10">Flip for cause and effect</button>
        </div>
        <!-- BACK -->
        <div class="flip-face flip-back p-4 glass">
          <p class="card-title">${d.title}</p>
          <div class="mt-3 text-sm text-white/90">
            <p><span class="pill">Cause</span> ${d.cause}</p>
            <p class="mt-2"><span class="pill">Effect</span> ${d.effect}</p>
          </div>
          <button class="flipBtn mt-auto px-3 py-1.5 rounded-lg bg-gradient-to-r from-fuchsia-500 to-indigo-500">Back</button>
        </div>
      </div>
    </article>
  `).join('');

  // wire up flip interactions
  tlRow.querySelectorAll('.flip').forEach(card =>{
    const btns = card.querySelectorAll('.flipBtn');
    btns.forEach(b => b.addEventListener('click', ()=> card.classList.toggle('flipped')));
    card.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === ' '){
        e.preventDefault(); card.classList.toggle('flipped');
      }
    });
  });
}

unitPick.addEventListener('change', renderTimeline);
renderTimeline();
// Konami fun
    let seq = []; const keycode = [38,38,40,40,37,39,37,39,66,65];
    window.addEventListener('keydown', e=>{
      seq.push(e.keyCode); if(seq.toString().indexOf(keycode)==0){
        document.body.classList.toggle('synth');
        seq=[];
      }
      if(seq.length>10) seq.shift();
    });
  </script>
</body>
</html>
